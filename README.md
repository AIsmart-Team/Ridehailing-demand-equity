# 考虑社会公平性的网约车需求预测
本文章提出了一个考虑社会公平性的GCN-LSTM网络对成都市市区范围内网约车的需求进行预测，其中“公平性”主要体现在在原本考虑预测准确性的损失函数（MAE）中加入衡量公平性的指标（MPE）
本次论文也是作者在深度学习方面的初次尝试，如果有相关的疑问，欢迎提出！

# Predicting Ride-Hailing Demand with Consideration of Social Equity

## Overview
本文提出了一个考虑空间属性、交通可达性的 SGC-LSTM（Social-graph convolution Long Short-Term Memory）深度学习框架。
I. 首先，结合社会空间属性数据创建了包括功能相似图、人口结构图、历史需求图在内的多个功能图，提取非欧式的语义关系，并将多图输入图卷积网络（Graph Convolutional Network，GCN）
II. 其次，将时序特征数据、气温数据、降雨数据输入长短期记忆网络（Long Short-Term Memory，LSTM）进行辅助预测
III. 然后，以 30 分钟内驾车可达 POI 个数为依据，将研究区域划分为高可达性地区和地可达性地区
IV. 最后，在损失函数中加入公平性指标 MPE（Mean Percentage Error，MPE），对预测结果进行正则化，用 MPE Gap 指标衡量弱势和优势地区的预测差距。

基于成都真实数据集评估显示，本文所提出的方法与表现最佳的基准模型相比，在预测准确性和公平性方面可以提升 8.9%和 11.1%。其有效关注了弱势群体的实际需求，同时提升了优势地区的预测精度。本仓库包含了一种新颖的网约车需求预测方法的实现及研究成果，该方法特别考虑了社会公平因素。通过中国成都的案例研究，我们展示了如何通过结合人口统计、空间和交通可达性信息，在不同城市区域中实现更公平和更准确的需求预测。

## Motivation

随着移动互联网技术的快速发展，网约车服务在全球范围内日益普及，在很大程度上重塑了人们的出行方式。
网约车作为公共交通体系的重要补充，已呈现出市场主体多元、从业人员众多、闲置运力丰富的特点。其在一定程度上缓解了城市的出行压力，但同时也加剧了城市交通资源分配的不均衡问题，使得部分弱势群体在出行方面面临更大的挑战。
因此，如何在确保社会公平性的前提下，精准预测网约车出行需求，对于优化交通资源配置、提升出行效率具有至关重要的意义。
现有的研究较少考虑不同区域之间人口结构、用地属性等的时空数据的异质性，并没有很好地建模表征起终点区域之间的时空依赖关系，在特征提取时较为片面。其次，需求预测相关研究对于精度方面过分关注，忽略了区域社会属性和人群特征，导致了需求预测中交通资源丰富地区和匮乏地区之间的不公平性。现有研究大多侧重于采用整体区域的平均预测精度来评估模型预测的效果，而缺乏对弱势地区和优势地区的现状关注以及预测结果差异的研究。

## Key Contributions
1、在邻接矩阵的基础上，考虑社会经济属性，开发功能相似图、人口结构图、历史需求相似度等多图进行联合预测。
2、采用可达性作为依据，通过衡量各区域人群的交通POI可达性来划分低可达性人群和高可达性人群，并识别群体间的需求差异。
3、开发了一种缓解偏差的正则化方法，通过降低弱势群体和优势群体之间的MPE差距，使网络能够学习到公平的预测。
4、以成都市滴滴公司数据的实验，揭示了使用最先进的时空深度学习预测产生空间不公平需求预测的风险，提出的新方法不仅可以减少弱势群体和优势群体之间的预测差距，而且可以提高整体预测精度。

## Methodology

开发了一种社会图卷积长短期记忆网络（SGC-LSTM）框架，将社会公平因素纳入网约车需求预测中，整合了多个功能图，包括：区域间的功能相似性、人口结构和人口统计信息、历史需求模式，在损失函数中引入平均百分比误差指标，以平衡预测准确性和公平性，使用中国成都的真实数据进行了案例研究，对不同城市区域的预测准确性和公平性进行了全面评估

## Data
1. 本次订单数据采用了滴滴盖亚计划公开的网约车数据，2016年11月1日至30日共6102477条数据，按照每个街道、每天、每小时集计
2. 天气数据的时间粒度和范围与订单数据同步，包括气温和降水量
3. 可达性计算方式是——以某个街道的质心出发30分钟内能到达的POI总数
4. 融合图指标是将输入的三张图的指标按照1:1:1融合的

## Issues
作者在这篇论文完成过程中也遇到一些问题，例如：
1.可达性就代表公平性吗？
其实目前诸多论文都有对公平性的量化方式，在不同专业的角度下，量化方式是不一样的，在交通专业领域，“可达性”常常被用来量化公平性，只是衡量的尺度略有差距。
2. 为什么运营商要关注公平性问题？
其实论文最后的效果是预测的精确性和公平性都同时提升，并且“公平性”预测是面向未来的自动驾驶网约车市场情况，因此具有实际意义（本人觉得后续可以增加对经济效益指标的评估）

## Future
1. 本文章的亮点是多图，但是最后的融合图比例是1:1:1，理论上权重应该经过训练得出，未来还可以考虑借助大语言模型增强多图解释性（觉得很必要！）
   

## Citation

If you use this work in your research, please cite:

@article{chen2024predicting,
  title={Predicting Ride-Hailing Demand with Consideration of Social Equity: A Case Study of Chengdu.},
  author={Chen, Xinran and Tu, Meiting and Gruyer, Dominique and Shi, Tongtong},
  journal={Sustainability (2071-1050)},
  volume={16},
  number={22},
  year={2024}
}

## Keywords

Ride-hailing, Demand prediction, Social equity, Graph convolution networks, LSTM, Transportation fairness, Urban mobility, Sustainable transportation
